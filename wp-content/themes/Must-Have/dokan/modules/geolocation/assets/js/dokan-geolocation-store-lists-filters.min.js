!function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=61)}({61:function(e,t){var n,a;n=jQuery,(a={slider:null,sliderValue:0,distance:0,init:function(){var e=a;this.slider=n(".store-lists-other-filter-wrap .dokan-geolocation-location-filters .dokan-range-slider"),this.sliderValue=this.slider.prev(".dokan-range-slider-value").find("span"),this.slider.on("input",this.setSliderValue),this.slider.on("change",this.setDistance),n(".store-lists-other-filter-wrap .dokan-geolocation-location-filters .location-address input").on("change",this.buildAddressQuery),e.bindAddressInput(),n(" #dokan-store-listing-filter-wrap .dokan-geolocation-filters-loading").remove()},buildAddressQuery:function(e){var t=a;t.setParam("address",e.target.value),e.target.value||(t.setParam("distance",""),t.setParam("longitude",""),t.setParam("latitude",""))},bindAddressInput:function(){window.google&&google.maps?this.bindeGoogleMap():n('[name="dokan_mapbox_access_token"]').val()&&this.bindMapbox()},bindeGoogleMap:function(){var e=a,t=n(".location-address");e.geocoder=new google.maps.Geocoder;var o=t.find("input");autocomplete=new google.maps.places.Autocomplete(o.get(0)),autocomplete.addListener("place_changed",(function(){var t=autocomplete.getPlace();if(t){var n=t.geometry.location;e.latitude=n.lat(),e.longitude=n.lng(),e.setAddress(t.formatted_address)}})),e.navigatorGetCurrentPosition((function(){e.geocoder.geocode({location:{lat:e.latitude,lng:e.longitude}},(function(t,n){var a="";"OK"===n&&(a=t[0].formatted_address),e.setAddress(a),o.val(a)}))}))},bindMapbox:function(){var e=a,t=n(".location-address").find("input"),o=t.get(0),i=new Suggestions(o,[],{minLength:3,limit:3,hideOnBlur:!1});i.getItemValue=function(e){return e.place_name},t.on("change",(function(){if(i.selected){var t=i.selected;e.latitude=t.geometry.coordinates[1],e.longitude=t.geometry.coordinates[0],e.setAddress(t.place_name)}}));var r=_.debounce((function(t,n){t.cancel&&t.cancel(),e.mapboxGetPlaces(n,(function(e){i.update(e)}))}),250);t.on("input",(function(){var e=n(this).val();r(r,e)})),e.navigatorGetCurrentPosition((function(){e.mapboxGetPlaces({lng:e.longitude,lat:e.latitude},(function(n){if(n&&n.length){var a=n[0].place_name;e.setAddress(a),t.val(a)}}))}))},navigatorGetCurrentPosition:function(e){var t=a,o=n(".location-address").find(".locate-icon"),i=o.next();navigator.geolocation&&o.removeClass("dokan-hide").on("click",(function(){o.addClass("dokan-hide"),i.removeClass("dokan-hide"),navigator.geolocation.getCurrentPosition((function(n){o.removeClass("dokan-hide"),i.addClass("dokan-hide"),t.latitude=n.coords.latitude,t.longitude=n.coords.longitude,e()}))}))},mapboxGetPlaces:function(e,t){if(e){var a=n('[name="dokan_mapbox_access_token"]').val();e.lng&&e.lat&&(e=e.lng+"%2C"+e.lat);var o="https://api.mapbox.com/geocoding/v5/mapbox.places/"+e+".json?access_token="+a+"&cachebuster="+ +new Date+"&autocomplete=true";n.ajax({url:o,method:"get"}).done((function(e){e.features&&"function"==typeof t&&t(e.features)}))}},setAddress:function(e){var t=a;if(t.setParam("address",e),!t.distance){var n=0,o=t.slider.val();if(o)n=o;else{var i=parseInt(t.slider.attr("min"),10),r=parseInt(t.slider.attr("max"),10);n=Math.ceil((i+r)/2)}t.setParam("distance",n)}t.setParam("latitude",t.latitude),t.setParam("longitude",t.longitude)},setParam:function(e,t){t?dokan.storeLists.query[e]=t:delete dokan.storeLists.query[e]},setSliderValue:function(e){a.sliderValue.html(e.target.value)},setDistance:function(e){a.setParam("distance",e.target.value)}}).init()}});